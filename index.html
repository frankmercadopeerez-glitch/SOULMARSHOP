<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soulmarshop - Ofertas Exclusivas</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåä</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Volvemos al SDK 'latest' -->
    <script src="https://sdks.shopifycdn.com/js-buy-sdk/v2/latest/index.umd.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #0F172A;      
            --bg-card: #1E293B;      
            --text-light: #E2E8F0;    
            --text-muted: #94A3B8;   
            --accent-blue: #38BDF8;  
            --accent-pink: #EC4899;  
            --accent-green: #22C55E; 
            --white: #FFFFFF;
        }
        
        html.dark { color-scheme: dark; }
        body { font-family: 'Manrope', sans-serif; background-color: var(--bg-dark); color: var(--text-light); }
        h1, h2, h3, h4, h5, h6 { font-weight: 800; }

        .cta-button {
            display: inline-block; padding: 12px 28px; font-weight: 700; font-size: 1.1rem; 
            color: var(--white); border-radius: 12px;
            background-image: linear-gradient(to right, var(--accent-blue), var(--accent-pink));
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.3); transition: all 0.3s ease;
        }
        .cta-button:hover { box-shadow: 0 6px 20px rgba(236, 72, 153, 0.5); transform: translateY(-2px); }
        .cta-button:disabled {
            background-image: none;
            background-color: #334155;
            cursor: not-allowed;
            box-shadow: none;
        }

        .product-card {
            background-color: var(--bg-card); border-radius: 16px;
            border: 1px solid #334155; overflow: hidden; transition: all 0.3s ease;
        }
        .product-card:hover { transform: translateY(-5px); border-color: var(--accent-blue); }

        .infinite-carousel-container {
            width: 100%; overflow: hidden;
            -webkit-mask-image: linear-gradient(to right, transparent, white 10%, white 90%, transparent);
            mask-image: linear-gradient(to right, transparent, white 10%, white 90%, transparent);
        }
        .infinite-carousel-track {
            display: flex; width: calc(370px * 24); 
            animation: scroll 60s linear infinite;
        }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(calc(-370px * 12)); } }
        
        .review-card {
            width: 350px; margin-right: 20px; flex-shrink: 0;
            background-color: var(--bg-card); border: 1px solid #334155;
            border-radius: 16px; padding: 1.5rem;
        }
        .star-rating { display: flex; align-items: center; gap: 2px; }
        .star-rating svg { width: 1.1rem; height: 1.1rem; color: #FBBF24; }

        .countdown-timer { display: flex; gap: 1rem; justify-content: center; }
        .countdown-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background-color: var(--bg-card); border-radius: 12px;
            width: 80px; height: 80px; border: 1px solid #334155;
        }
        .countdown-item span:first-child { font-size: 2rem; font-weight: 800; color: var(--accent-blue); }
        .countdown-item span:last-child { font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted); }

        .quantity-selector {
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
        }
        .quantity-btn {
            background-color: #334155;
            color: var(--text-light);
            padding: 0 12px;
            font-size: 1.2rem;
            height: 40px;
            transition: background-color 0.2s;
        }
        .quantity-btn:hover:not(:disabled) {
            background-color: #475569;
        }
        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .quantity-input {
            width: 40px;
            text-align: center;
            background-color: var(--bg-card);
            color: var(--text-light);
            border: none;
            height: 40px;
            font-weight: bold;
            -webkit-appearance: none;
            margin: 0;
        }
        .quantity-input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="antialiased">

    <!-- ======================================
    HEADER / NAVEGACI√ìN
    ====================================== -->
    <nav class="sticky top-0 z-50" style="background-color: var(--bg-dark); border-bottom: 1px solid #334155;">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold" style="color: var(--text-light);">Soulmarshop</h1>
            
            <button id="cart-button" class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" style="color: var(--text-light);" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
            </button>
        </div>
    </nav>

    <!-- ======================================
    SECCI√ìN HERO (BIENVENIDA)
    ====================================== -->
    <header class="container mx-auto px-6 py-16 text-center">
        <h2 class="text-4xl md:text-5xl font-extrabold" style="color: var(--white);">Descubre lo mejor, solo para ti.</h2>
        <p class="mt-4 text-lg" style="color: var(--text-muted);">Calidad, confianza y los mejores precios, directo a tu puerta.</p>
    </header>

    <!-- ======================================
    SECCI√ìN DE OFERTA LIMITADA
    ====================================== -->
    <section class="container mx-auto px-6 py-12">
        <div class="rounded-2xl p-8" style="background-image: linear-gradient(to right, var(--accent-blue), var(--accent-pink));">
            <h2 class="text-3xl font-bold text-center text-white mb-6">¬°OFERTA LIMITADA!</h2>
            <p class="text-center text-white text-lg mb-8">Nuestras ofertas terminan pronto. ¬°No te lo pierdas!</p>
            
            <div class="countdown-timer mb-8">
                <div class="countdown-item">
                    <span id="countdown-days">00</span>
                    <span>D√≠as</span>
                </div>
                <div class="countdown-item">
                    <span id="countdown-hours">00</span>
                    <span>Horas</span>
                </div>
                <div class="countdown-item">
                    <span id="countdown-mins">00</span>
                    <span>Min</span>
                </div>
                <div class="countdown-item">
                    <span id="countdown-secs">00</span>
                    <span>Seg</span>
                </div>
            </div>
            <p class="text-center text-white font-bold">La oferta termina el 15 de este mes.</p>
        </div>
    </section>

    <!-- ======================================
    SECCI√ìN DE CONFIANZA (CON EMOJIS)
    ====================================== -->
    <section class="container mx-auto px-6 py-12">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
            <div class="flex flex-col items-center p-6 rounded-lg" style="background-color: var(--bg-card);">
                <span class="text-5xl">üì¶</span>
                <h3 class="text-xl font-bold mt-4">Paga Contra Entrega</h3>
                <p class="mt-2" style="color: var(--text-muted);">Paga solo cuando recibas tu producto. ¬°Cero riesgos!</p>
            </div>
            <div class="flex flex-col items-center p-6 rounded-lg" style="background-color: var(--bg-card);">
                <span class="text-5xl">üöö</span>
                <h3 class="text-xl font-bold mt-4">Env√≠o R√°pido</h3>
                <p class="mt-2" style="color: var(--text-muted);">Recibe tu pedido en tiempo r√©cord en todo el pa√≠s.</p>
            </div>
            <div class="flex flex-col items-center p-6 rounded-lg" style="background-color: var(--bg-card);">
                <span class="text-5xl">‚úÖ</span>
                <h3 class="text-xl font-bold mt-4">Calidad Garantizada</h3>
                <p class="mt-2" style="color: var(--text-muted);">Solo trabajamos con productos de la m√°s alta calidad.</p>
            </div>
        </div>
    </section>

    <!-- ======================================
    SECCI√ìN DE CAT√ÅLOGO (PRODUCTOS)
    ====================================== -->
    <main class="container mx-auto px-6 py-16">
        <h2 class="text-3xl font-bold text-center mb-12" style="color: var(--white);">Nuestro Cat√°logo</h2>
        
        <div id="products-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            <p id="loading-indicator" class="col-span-full text-center" style="color: var(--text-muted);">Cargando productos...</p>
        </div>
    </main>

    <!-- ======================================
    CARRUSEL DE RESE√ëAS (v2)
    ====================================== -->
    <section class="py-16" style="background-color: var(--bg-dark);">
        <div class="container mx-auto px-6">
            
            <div class="flex flex-col md:flex-row justify-between items-center mb-12 px-4">
                <h2 class="text-3xl font-bold text-center md:text-left" style="color: var(--white);">Lo que dicen nuestros clientes</h2>
                <div class="flex items-center gap-4 mt-4 md:mt-0">
                    <div class="flex items-center gap-1">
                        <div class="star-rating">
                            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg>
                            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg>
                            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg>
                            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg>
                            <svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0v15z"/></svg>
                        </div>
                        <span class="text-lg font-bold ml-2" style="color: var(--text-light);">4.5</span>
                    </div>
                    <span class="text-lg" style="color: var(--text-muted);">(524 rese√±as)</span>
                </div>
            </div>
            
            <div class="infinite-carousel-container">
                <div class="infinite-carousel-track" id="review-track">
                    <!-- Rese√±as 1-12 -->
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Frank M.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"¬°Incre√≠ble! El producto lleg√≥ al d√≠a siguiente y la calidad es 10/10. Pagar contra entrega me dio mucha confianza."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Laura G.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Segunda vez que compro y sigo encantada. El env√≠o fue s√∫per r√°pido a Cartagena. Totalmente recomendados."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Javier P.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Ten√≠a dudas al comprar online, pero el servicio al cliente fue excelente y el producto es tal cual la descripci√≥n. ¬°Muy profesional!"</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Ana V.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Me encant√≥. El empaque perfecto y la atenci√≥n al detalle se nota. Volver√© a comprar sin duda."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Carlos R.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"El mejor precio que encontr√©. La oferta era real y el env√≠o gratis fue la clave. Excelente tienda."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Mar√≠a F.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Compr√© un regalo para mi esposo y le encant√≥. Lleg√≥ justo a tiempo para su cumplea√±os. Mil gracias."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">David L.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"El producto es una pasada. Mucho mejor de lo que esperaba. 100% recomendado."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Sof√≠a M.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Vivo en un pueblo alejado y el paquete lleg√≥ sin problema. Muy buen servicio de log√≠stica."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Miguel A.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"La p√°gina es muy f√°cil de usar y el proceso de pago contra entrega es transparente. S√∫per."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Isabela C.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Calidad-precio inmejorable. Lo recomiendo al 100%."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Juan D.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"El rastreo del pedido fue muy preciso. Sab√≠a d√≥nde estaba mi paquete en todo momento. Gran servicio."</p>
                    </div>
                    <div class="review-card">
                        <div class="star-rating mb-2"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 7.01l6.572-.955L10 0l2.939 6.055 6.572.955-4.756 4.435 1.123 6.545L10 15z"/></svg></div>
                        <p class="font-bold text-lg" style="color: var(--text-light);">Valentina S.</p><p class="text-sm font-bold" style="color: var(--accent-green);">Cliente Verificado</p>
                        <p class="mt-4" style="color: var(--text-muted);">"Perfecto. Nada m√°s que decir. Comprar√© de nuevo la pr√≥xima semana. Gracias Soulmarshop."</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ======================================
    SECCI√ìN "SOBRE NOSOTROS"
    ====================================== -->
    <section class="py-16" style="background-color: var(--bg-card);">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-6" style="color: var(--white);">Nuestra Promesa</h2>
            <p class="max-w-3xl mx-auto text-lg" style="color: var(--text-muted);">
                Somos Soulmarshop, tu tienda de confianza. Con m√°s de 5 a√±os de experiencia y miles de productos entregados, hemos aprendido que la confianza del cliente es nuestro mayor tesoro.
                <br><br>
                Nos dedicamos a encontrar y ofrecerte solo los mejores productos, asegur√°ndonos de que cada pedido sea una experiencia excepcional. Tu satisfacci√≥n es nuestra prioridad.
            </p>
        </div>
    </section>

    <!-- ======================================
    FOOTER
    ====================================== -->
    <footer class="py-12" style="background-color: var(--bg-dark);">
        <div class="container mx-auto px-6 text-center">
            <p style="color: var(--text-muted);">&copy; <span id="year">2024</span> Soulmarshop. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Bot√≥n flotante de Pagar (CTA) -->
    <button id="checkout-button" class="cta-button fixed bottom-4 right-4 transform translate-y-24 opacity-0 transition-all duration-300">
        Ir a Pagar
    </button>


    <!-- =================================================================== -->
    <!-- EL CEREBRO DE LA TIENDA (JavaScript)                                -->
    <!-- =================================================================== -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. CONFIGURACI√ìN INICIAL (TUS DATOS) ---
            const storefrontAccessToken = '07474875d0c64dc0b186575eaf96553e';
            const domain = 'vtbr71-af.myshopify.com';

            const client = ShopifyBuy.buildClient({
                domain: domain,
                storefrontAccessToken: storefrontAccessToken,
                // *** LA CORRECCI√ìN v8 ***
                apiVersion: '2023-07'
            });

            // --- 2. VARIABLES GLOBALES ---
            let checkoutId = null;
            let cartItemsCount = 0;

            const productsListEl = document.getElementById('products-list');
            const cartCountEl = document.getElementById('cart-count');
            const checkoutButtonEl = document.getElementById('checkout-button');
            const cartButtonEl = document.getElementById('cart-button');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            const yearEl = document.getElementById('year');
            if (yearEl) { yearEl.textContent = new Date().getFullYear(); }

            // --- 3. FUNCI√ìN: PINTAR UN PRODUCTO (HTML) ---
            function createProductCard(product) {
                const variant = product.variants[0];
                const price = variant.price.amount;
                const currency = variant.price.currencyCode;
                const variantId = variant.id;
                const imageSrc = product.images[0] ? product.images[0].src : 'https://placehold.co/600x400/0A7492/F7FAFC?text=Soulmarshop';

                const quantity = variant.quantityAvailable;
                
                let stockHTML = '';
                if (variant.available && quantity !== null && quantity <= 10 && quantity > 0) {
                    stockHTML = `<p class="mb-3 text-sm font-bold" style="color: var(--accent-pink);">¬°Quedan solo ${quantity} unidades!</p>`;
                } else if (!variant.available) {
                    stockHTML = `<p class="mb-3 text-sm font-bold" style="color: #F87171;">¬°Agotado!</p>`;
                }

                const productCard = document.createElement('div');
                productCard.className = 'product-card flex flex-col';
                
                const productId = product.id; 
                const productUrl = `./producto.html?id=${btoa(productId)}`; 

                productCard.innerHTML = `
                    <div class="relative flex-shrink-0">
                        <a href="${productUrl}">
                            <img src="${imageSrc}" alt="${product.title}" class="w-full h-64 object-cover">
                        </a>
                        <span class="absolute top-4 left-4 text-xs font-bold uppercase rounded-md p-2" style="background-color: var(--accent-blue); color: var(--bg-dark);">
                            ¬°Env√≠o Gratis!
                        </span>
                    </div>
                    
                    <div class="p-6 flex flex-col flex-grow">
                        <a href="${productUrl}" class="flex-grow">
                            <h3 class="text-xl font-bold mb-2" style="color: var(--text-light);">${product.title}</h3>
                        </a>
                        
                        ${stockHTML}

                        <div class="flex items-center justify-between mb-4">
                            <p class="text-lg font-bold" style="color: var(--accent-blue);">${price} ${currency}</p>
                            
                            <div class="quantity-selector flex items-center">
                                <button class="quantity-btn rounded-l-md" data-action="decrease" ${!variant.available ? 'disabled' : ''}>-</button>
                                <input 
                                    type="number" 
                                    class="quantity-input" 
                                    value="1" 
                                    min="1" 
                                    ${!variant.available ? 'disabled' : ''}
                                    data-variant-id="${variantId}"
                                >
                                <button class="quantity-btn rounded-r-md" data-action="increase" ${!variant.available ? 'disabled' : ''}>+</button>
                            </div>
                        </div>

                        <button 
                            class="add-to-cart-btn cta-button w-full"
                            data-variant-id="${variantId}"
                            ${!variant.available ? 'disabled' : ''}
                        >
                            ${!variant.available ? 'Agotado' : 'A√±adir al Carrito'}
                        </button>
                    </div>
                `;
                return productCard;
            }

            // --- 4. FUNCI√ìN: OBTENER PRODUCTOS ---
            async function fetchAndDisplayProducts() {
                try {
                    const products = await client.product.fetchAll(20);
                    
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'none';
                    }

                    if (products.length > 0) {
                        products.forEach(product => {
                            if (product.variants[0]) {
                                const card = createProductCard(product);
                                if (productsListEl) {
                                    productsListEl.appendChild(card);
                                }
                            }
                        });
                    } else {
                        if (productsListEl) {
                            productsListEl.innerHTML = `
                                <p class="col-span-full text-center" style="color: var(--text-muted);">
                                    ¬°Bienvenido! Agrega tu primer producto desde Dropi en tu panel de Shopify para verlo aqu√≠.
                                </p>`;
                        }
                    }
                } catch (error) {
                    console.error('Error al obtener productos:', error);
                    if (loadingIndicator) {
                        loadingIndicator.innerHTML = '<p class="text-center text-red-600 col-span-full">Hubo un error al cargar los productos.</p>';
                    }
                }
            }

            // --- 5. FUNCI√ìN: OBTENER O CREAR CARRITO (M√°s segura) ---
            async function getOrCreateCheckout() {
                try {
                    let existingCheckoutId = localStorage.getItem('checkoutId');

                    if (existingCheckoutId && existingCheckoutId !== 'null' && existingCheckoutId !== 'undefined') {
                        const checkout = await client.checkout.fetch(existingCheckoutId);
                        
                        if (checkout.completedAt) {
                            existingCheckoutId = null;
                        } else {
                            checkoutId = existingCheckoutId;
                        }
                    }

                    if (!existingCheckoutId) {
                        const newCheckout = await client.checkout.create();
                        checkoutId = newCheckout.id;
                        localStorage.setItem('checkoutId', checkoutId);
                    }
                    
                    console.log('Usando Carrito con ID:', checkoutId);
                    updateCartCount(); 

                } catch (error) {
                    console.error('Error al obtener/crear carrito:', error);
                    // Si falla el fetch O el create, lo intentamos de nuevo
                    // Esto puede ser por un ID viejo de localStorage
                    localStorage.removeItem('checkoutId'); // Limpiar el ID malo
                    const newCheckout = await client.checkout.create();
                    checkoutId = newCheckout.id;
                    localStorage.setItem('checkoutId', newCheckout.id);
                }
            }
            
            // --- 6. FUNCI√ìN: ACTUALIZAR CONTADOR ---
            async function updateCartCount() {
                if (!checkoutId) return;
                try {
                    const checkout = await client.checkout.fetch(checkoutId);
                    cartItemsCount = checkout.lineItems.reduce((total, item) => total + item.quantity, 0);
                    
                    if (cartCountEl) {
                        cartCountEl.textContent = cartItemsCount;
                    }
                    if (cartItemsCount > 0 && checkoutButtonEl) {
                        checkoutButtonEl.style.opacity = '1';
                        checkoutButtonEl.style.transform = 'translateY(0)';
                    } else if (checkoutButtonEl) {
                        checkoutButtonEl.style.opacity = '0';
                        checkoutButtonEl.style.transform = 'translateY(24px)';
                    }
                } catch (error) {
                    console.warn('No se pudo actualizar el contador del carrito:', error);
                }
            }

            // --- 7. L√ìGICA DE CLICS EN LA TARJETA ---
            function handleCardClick(event) {
                const target = event.target;

                if (target.classList.contains('quantity-btn')) {
                    const action = target.dataset.action;
                    const input = target.parentElement.querySelector('.quantity-input');
                    let value = parseInt(input.value, 10);

                    if (action === 'increase') {
                        value++;
                    } else if (action === 'decrease' && value > 1) {
                        value--;
                    }
                    input.value = value;
                }

                const addButton = target.closest('.add-to-cart-btn');
                if (addButton) {
                    const variantId = addButton.dataset.variantId;
                    const quantityInput = addButton.closest('.product-card').querySelector(`input[data-variant-id="${variantId}"]`);
                    const quantity = parseInt(quantityInput.value, 10);
                    
                    addToCart(variantId, quantity, addButton);
                }
            }

            // --- 8. FUNCI√ìN: A√ëADIR AL CARRITO ---
            async function addToCart(variantId, quantity, button) {
                if (button.disabled) return; 

                button.textContent = 'A√±adiendo...';
                button.disabled = true;

                try {
                    const lineItemsToAdd = [{ variantId: variantId, quantity: quantity }];
                    await client.checkout.addLineItems(checkoutId, lineItemsToAdd);
                    
                    await updateCartCount(); 

                    button.textContent = 'A√±adido ‚úî';
                    setTimeout(() => {
                        button.textContent = 'A√±adir al Carrito';
                        button.disabled = false;
                    }, 2000);
                } catch (error) {
                    console.error('Error al a√±adir al carrito:', error);
                    button.textContent = 'Error';
                    setTimeout(() => {
                        button.textContent = 'A√±adir al Carrito';
                        button.disabled = false;
                    }, 2000);
                }
            }

            // --- 9. FUNCI√ìN: IR A PAGAR ---
            async function goToCheckout() {
                if (!checkoutId) return;
                if (checkoutButtonEl) {
                    checkoutButtonEl.textContent = 'Cargando...';
                }
                try {
                    const checkout = await client.checkout.fetch(checkoutId);
                    window.location.href = checkout.webUrl;
                } catch (error) {
                    console.error('Error al ir a pagar:', error);
                    if (checkoutButtonEl) {
                        checkoutButtonEl.textContent = 'Ir a Pagar';
                    }
                }
            }

            // --- 10. L√ìGICA DE CUENTA REGRESIVA ---
            function startCountdown() {
                const daysEl = document.getElementById('countdown-days');
                const hoursEl = document.getElementById('countdown-hours');
                const minsEl = document.getElementById('countdown-mins');
                const secsEl = document.getElementById('countdown-secs');
                if (!daysEl || !hoursEl || !minsEl || !secsEl) return;
                const targetDate = new Date();
                if (new Date().getDate() > 15) { targetDate.setMonth(targetDate.getMonth() + 1); }
                targetDate.setDate(15); targetDate.setHours(23, 59, 59, 0);
                setInterval(() => {
                    const now = new Date(); const diff = targetDate.getTime() - now.getTime();
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const secs = Math.floor((diff % (1000 * 60)) / 1000);
                    daysEl.textContent = String(days).padStart(2, '0');
                    hoursEl.textContent = String(hours).padStart(2, '0');
                    minsEl.textContent = String(mins).padStart(2, '0');
                    secsEl.textContent = String(secs).padStart(2, '0');
                }, 1000);
            }

            // --- 11. INICIALIZACI√ìN ---
            async function init() {
                startCountdown(); 
                
                // Los dos pasos, en orden.
                await getOrCreateCheckout();
                await fetchAndDisplayProducts();
                
                if (productsListEl) {
                    productsListEl.addEventListener('click', handleCardClick);
                }
                if (checkoutButtonEl) {
                    checkoutButtonEl.addEventListener('click', goToCheckout);
                }
                if (cartButtonEl) {
                    cartButtonEl.addEventListener('click', goToCheckout);
                }
            }

            init();
        });
    </script>
</body>
</html>